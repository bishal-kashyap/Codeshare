module "scaling_plan_association" {
  for_each = {
    for sp, hps in var.tfvars.scaling_plan_association :
    for hp in hps :
    "${sp}-${hp}" => {
      scaling_plan = module.scaling_plan[sp].scaling_plan_id
      host_pool    = module.host_pool[hp].host_pool_id
    }
  }

  source = "./../resource_modules/avd_scaling_plan_association"

  host_pool_id    = each.value.host_pool
  scaling_plan_id = each.value.scaling_plan
}
